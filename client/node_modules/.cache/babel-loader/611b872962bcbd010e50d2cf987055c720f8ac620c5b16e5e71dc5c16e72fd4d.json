{"ast":null,"code":"import canvasState from '../store/canvasState';\nexport const storeHandler = msg => {\n  switch (msg.type) {\n    case 'undo':\n      undoHandler(msg.id);\n      break;\n    case 'redo':\n      redoHandler(msg.id);\n      break;\n    default:\n      break;\n  }\n};\nexport function redoHandler(id) {\n  if (!canvasState.socket) return;\n  const lockStore = localStorage.getItem(id);\n  if (!lockStore) return;\n  const current = JSON.parse(lockStore).current;\n  if (!current) return;\n  const img = document.createElement('img');\n  img.src = current;\n  img.onload = () => {\n    if (!canvasState.ctx) return;\n    canvasState.ctx.clearRect(0, 0, 600, 400);\n    canvasState.ctx.drawImage(img, 0, 0, 600, 400);\n  };\n}\nexport function undoHandler(id) {\n  if (!canvasState.socket) return;\n  const lockStore = localStorage.getItem(id);\n  if (!lockStore) return;\n  const current = JSON.parse(lockStore).current;\n  const img = document.createElement('img');\n  img.src = current;\n  img.onload = () => {\n    if (!canvasState.ctx) return;\n    canvasState.ctx.clearRect(0, 0, 600, 400);\n    canvasState.ctx.drawImage(img, 0, 0, 600, 400);\n  };\n}","map":{"version":3,"names":["canvasState","storeHandler","msg","type","undoHandler","id","redoHandler","socket","lockStore","localStorage","getItem","current","JSON","parse","img","document","createElement","src","onload","ctx","clearRect","drawImage"],"sources":["C:/Users/mistR/OneDrive/Рабочий стол/React/ts/paint-ts/client/src/sokcet/storeHandler.ts"],"sourcesContent":["import { StoreI } from '../model/msgI';\r\nimport canvasState from '../store/canvasState';\r\n\r\nexport const storeHandler = (msg: StoreI) => {\r\n\r\n    switch (msg.type) {\r\n        case 'undo':\r\n            undoHandler(msg.id);\r\n            break;\r\n\r\n        case 'redo': \r\n            redoHandler(msg.id);\r\n            break;\r\n\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\nexport function redoHandler(id: string) {\r\n    if(!canvasState.socket) return;\r\n    const lockStore = localStorage.getItem(id);\r\n    if(!lockStore) return;\r\n\r\n    const current: string = JSON.parse(lockStore).current;\r\n\r\n    if(!current) return;\r\n    \r\n    const img = document.createElement('img');\r\n    img.src = current;\r\n    img.onload = () => {\r\n        if(!canvasState.ctx) return;\r\n        canvasState.ctx.clearRect(0, 0, 600, 400);\r\n        canvasState.ctx.drawImage(img, 0, 0, 600, 400);\r\n        \r\n    }\r\n}\r\n\r\n\r\nexport function undoHandler(id: string) {\r\n    if(!canvasState.socket) return;\r\n    const lockStore = localStorage.getItem(id);\r\n    if(!lockStore) return;\r\n\r\n    const current: string = JSON.parse(lockStore).current;\r\n    \r\n    const img = document.createElement('img');\r\n    img.src = current;\r\n    img.onload = () => {\r\n    if(!canvasState.ctx) return;\r\n    canvasState.ctx.clearRect(0, 0, 600, 400);\r\n    canvasState.ctx.drawImage(img, 0, 0, 600, 400);\r\n    \r\n}\r\n}"],"mappings":"AACA,OAAOA,WAAW,MAAM,sBAAsB;AAE9C,OAAO,MAAMC,YAAY,GAAIC,GAAW,IAAK;EAEzC,QAAQA,GAAG,CAACC,IAAI;IACZ,KAAK,MAAM;MACPC,WAAW,CAACF,GAAG,CAACG,EAAE,CAAC;MACnB;IAEJ,KAAK,MAAM;MACPC,WAAW,CAACJ,GAAG,CAACG,EAAE,CAAC;MACnB;IAEJ;MACI;EACR;AACJ,CAAC;AAED,OAAO,SAASC,WAAWA,CAACD,EAAU,EAAE;EACpC,IAAG,CAACL,WAAW,CAACO,MAAM,EAAE;EACxB,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAACL,EAAE,CAAC;EAC1C,IAAG,CAACG,SAAS,EAAE;EAEf,MAAMG,OAAe,GAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC,CAACG,OAAO;EAErD,IAAG,CAACA,OAAO,EAAE;EAEb,MAAMG,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACzCF,GAAG,CAACG,GAAG,GAAGN,OAAO;EACjBG,GAAG,CAACI,MAAM,GAAG,MAAM;IACf,IAAG,CAAClB,WAAW,CAACmB,GAAG,EAAE;IACrBnB,WAAW,CAACmB,GAAG,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;IACzCpB,WAAW,CAACmB,GAAG,CAACE,SAAS,CAACP,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;EAElD,CAAC;AACL;AAGA,OAAO,SAASV,WAAWA,CAACC,EAAU,EAAE;EACpC,IAAG,CAACL,WAAW,CAACO,MAAM,EAAE;EACxB,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAACL,EAAE,CAAC;EAC1C,IAAG,CAACG,SAAS,EAAE;EAEf,MAAMG,OAAe,GAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC,CAACG,OAAO;EAErD,MAAMG,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACzCF,GAAG,CAACG,GAAG,GAAGN,OAAO;EACjBG,GAAG,CAACI,MAAM,GAAG,MAAM;IACnB,IAAG,CAAClB,WAAW,CAACmB,GAAG,EAAE;IACrBnB,WAAW,CAACmB,GAAG,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;IACzCpB,WAAW,CAACmB,GAAG,CAACE,SAAS,CAACP,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;EAElD,CAAC;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}