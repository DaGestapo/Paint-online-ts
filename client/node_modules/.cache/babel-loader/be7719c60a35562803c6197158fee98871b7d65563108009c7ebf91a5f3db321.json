{"ast":null,"code":"import canvasState from '../store/canvasState';\nimport toolState from '../store/toolState';\nimport { drawHandler } from './methodHandlers/drawHandler';\nimport { changeSettingsHandler } from './methodHandlers/settingsHandler';\nimport { connectionHandler } from './methodHandlers/connectionHandler';\nimport { storeHandler } from './methodHandlers/storeHandler';\nexport const setSocketListener = socket => {\n  socket.onmessage = msg => {\n    const parsedMsg = JSON.parse(msg.data);\n    if (!toolState.tool || !canvasState.ctx || !canvasState.id) return;\n    switch (parsedMsg.method) {\n      case 'connection':\n        connectionHandler(parsedMsg);\n        break;\n      case 'draw':\n        drawHandler(parsedMsg);\n        break;\n      case 'store':\n        storeHandler(parsedMsg);\n        break;\n      case 'setting':\n        changeSettingsHandler(parsedMsg);\n        break;\n      case 'finish':\n        canvasState.ctx.beginPath();\n        break;\n      default:\n        break;\n    }\n  };\n};","map":{"version":3,"names":["canvasState","toolState","drawHandler","changeSettingsHandler","connectionHandler","storeHandler","setSocketListener","socket","onmessage","msg","parsedMsg","JSON","parse","data","tool","ctx","id","method","beginPath"],"sources":["C:/Users/mistR/OneDrive/Рабочий стол/React/ts/paint-ts/client/src/sokcet/socket.ts"],"sourcesContent":["import canvasState from '../store/canvasState';\r\nimport toolState from '../store/toolState';\r\n\r\nimport { drawHandler } from './methodHandlers/drawHandler';\r\nimport { changeSettingsHandler } from './methodHandlers/settingsHandler';\r\nimport { connectionHandler } from './methodHandlers/connectionHandler';\r\nimport { storeHandler } from './methodHandlers/storeHandler';\r\n\r\nexport const setSocketListener = (socket: WebSocket) => {\r\n    socket.onmessage = (msg) => {\r\n        const parsedMsg = JSON.parse(msg.data);\r\n        if(!toolState.tool || !canvasState.ctx || !canvasState.id) return;\r\n        switch (parsedMsg.method) {\r\n\r\n            case 'connection': \r\n                connectionHandler(parsedMsg);\r\n                break;\r\n\r\n            case 'draw':\r\n                drawHandler(parsedMsg);\r\n                break;\r\n\r\n            case 'store':\r\n                storeHandler(parsedMsg);\r\n                break;\r\n\r\n            case 'setting': \r\n                changeSettingsHandler(parsedMsg);\r\n                break;\r\n    \r\n            case 'finish':\r\n                canvasState.ctx.beginPath();\r\n                break;\r\n        \r\n            default:\r\n                break;\r\n        }\r\n    }\r\n} \r\n\r\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,sBAAsB;AAC9C,OAAOC,SAAS,MAAM,oBAAoB;AAE1C,SAASC,WAAW,QAAQ,8BAA8B;AAC1D,SAASC,qBAAqB,QAAQ,kCAAkC;AACxE,SAASC,iBAAiB,QAAQ,oCAAoC;AACtE,SAASC,YAAY,QAAQ,+BAA+B;AAE5D,OAAO,MAAMC,iBAAiB,GAAIC,MAAiB,IAAK;EACpDA,MAAM,CAACC,SAAS,GAAIC,GAAG,IAAK;IACxB,MAAMC,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACH,GAAG,CAACI,IAAI,CAAC;IACtC,IAAG,CAACZ,SAAS,CAACa,IAAI,IAAI,CAACd,WAAW,CAACe,GAAG,IAAI,CAACf,WAAW,CAACgB,EAAE,EAAE;IAC3D,QAAQN,SAAS,CAACO,MAAM;MAEpB,KAAK,YAAY;QACbb,iBAAiB,CAACM,SAAS,CAAC;QAC5B;MAEJ,KAAK,MAAM;QACPR,WAAW,CAACQ,SAAS,CAAC;QACtB;MAEJ,KAAK,OAAO;QACRL,YAAY,CAACK,SAAS,CAAC;QACvB;MAEJ,KAAK,SAAS;QACVP,qBAAqB,CAACO,SAAS,CAAC;QAChC;MAEJ,KAAK,QAAQ;QACTV,WAAW,CAACe,GAAG,CAACG,SAAS,CAAC,CAAC;QAC3B;MAEJ;QACI;IACR;EACJ,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}