{"ast":null,"code":"import canvasState from '../store/canvasState';\nexport const connectionHandler = msg => {\n  const savedCanvas = localStorage.getItem(msg.id) ? localStorage.getItem(msg.id) : null;\n  const ctx = canvasState.ctx ? canvasState.ctx : null;\n  if (savedCanvas && ctx) {\n    const imgs = JSON.parse(savedCanvas).undo;\n    const img = document.createElement('img');\n    img.src = imgs[imgs.length - 1];\n    setTimeout(() => {\n      ctx.drawImage(img, 0, 0, 600, 400);\n    }, 0);\n  }\n};","map":{"version":3,"names":["canvasState","connectionHandler","msg","savedCanvas","localStorage","getItem","id","ctx","imgs","JSON","parse","undo","img","document","createElement","src","length","setTimeout","drawImage"],"sources":["C:/Users/mistR/OneDrive/Рабочий стол/React/ts/paint-ts/client/src/sokcet/connectionHandler.ts"],"sourcesContent":["import { ConnectionI } from '../model/msgI';\r\nimport canvasState from '../store/canvasState';\r\n\r\nexport const connectionHandler = (msg: ConnectionI) => {\r\n        const savedCanvas = localStorage.getItem(msg.id)\r\n            ? localStorage.getItem(msg.id)\r\n            : null;\r\n        const ctx = canvasState.ctx\r\n            ? canvasState.ctx\r\n            : null;\r\n\r\n        if(savedCanvas && ctx) {\r\n            const imgs: string[] = JSON.parse(savedCanvas).undo;\r\n            const img = document.createElement('img');\r\n            img.src = imgs[imgs.length - 1];\r\n\r\n            setTimeout(() => {\r\n                ctx.drawImage(img, 0, 0, 600, 400);\r\n            }, 0);\r\n        }\r\n}"],"mappings":"AACA,OAAOA,WAAW,MAAM,sBAAsB;AAE9C,OAAO,MAAMC,iBAAiB,GAAIC,GAAgB,IAAK;EAC/C,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAACH,GAAG,CAACI,EAAE,CAAC,GAC1CF,YAAY,CAACC,OAAO,CAACH,GAAG,CAACI,EAAE,CAAC,GAC5B,IAAI;EACV,MAAMC,GAAG,GAAGP,WAAW,CAACO,GAAG,GACrBP,WAAW,CAACO,GAAG,GACf,IAAI;EAEV,IAAGJ,WAAW,IAAII,GAAG,EAAE;IACnB,MAAMC,IAAc,GAAGC,IAAI,CAACC,KAAK,CAACP,WAAW,CAAC,CAACQ,IAAI;IACnD,MAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IACzCF,GAAG,CAACG,GAAG,GAAGP,IAAI,CAACA,IAAI,CAACQ,MAAM,GAAG,CAAC,CAAC;IAE/BC,UAAU,CAAC,MAAM;MACbV,GAAG,CAACW,SAAS,CAACN,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;IACtC,CAAC,EAAE,CAAC,CAAC;EACT;AACR,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}