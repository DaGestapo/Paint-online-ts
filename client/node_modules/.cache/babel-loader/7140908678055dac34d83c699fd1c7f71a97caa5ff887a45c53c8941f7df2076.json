{"ast":null,"code":"import canvasState from '../store/canvasState';\nexport const connectionHandler = msg => {\n  console.log(msg.username);\n  const savedCanvas = localStorage.getItem(msg.id) ? localStorage.getItem(msg.id) : null;\n  const ctx = canvasState.ctx ? canvasState.ctx : null;\n  if (savedCanvas && ctx) {\n    const arr = JSON.parse(savedCanvas);\n    const img = document.createElement('img');\n    img.src = savedCanvas;\n    setTimeout(() => {\n      ctx.drawImage(img, 0, 0, 600, 400);\n    }, 0);\n  }\n};","map":{"version":3,"names":["canvasState","connectionHandler","msg","console","log","username","savedCanvas","localStorage","getItem","id","ctx","arr","JSON","parse","img","document","createElement","src","setTimeout","drawImage"],"sources":["C:/Users/mistR/OneDrive/Рабочий стол/React/ts/paint-ts/client/src/sokcet/connectionHandler.ts"],"sourcesContent":["import { ConnectionI } from '../model/msgI';\r\nimport canvasState from '../store/canvasState';\r\n\r\nexport const connectionHandler = (msg: ConnectionI) => {\r\n    console.log(msg.username);\r\n        const savedCanvas = localStorage.getItem(msg.id)\r\n            ? localStorage.getItem(msg.id)\r\n            : null;\r\n        const ctx = canvasState.ctx\r\n            ? canvasState.ctx\r\n            : null;\r\n\r\n        if(savedCanvas && ctx) {\r\n            const arr = JSON.parse(savedCanvas);\r\n            const img = document.createElement('img');\r\n            img.src = savedCanvas;\r\n\r\n            setTimeout(() => {\r\n                ctx.drawImage(img, 0, 0, 600, 400);\r\n            }, 0);\r\n        }\r\n}"],"mappings":"AACA,OAAOA,WAAW,MAAM,sBAAsB;AAE9C,OAAO,MAAMC,iBAAiB,GAAIC,GAAgB,IAAK;EACnDC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,QAAQ,CAAC;EACrB,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAACN,GAAG,CAACO,EAAE,CAAC,GAC1CF,YAAY,CAACC,OAAO,CAACN,GAAG,CAACO,EAAE,CAAC,GAC5B,IAAI;EACV,MAAMC,GAAG,GAAGV,WAAW,CAACU,GAAG,GACrBV,WAAW,CAACU,GAAG,GACf,IAAI;EAEV,IAAGJ,WAAW,IAAII,GAAG,EAAE;IACnB,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACP,WAAW,CAAC;IACnC,MAAMQ,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IACzCF,GAAG,CAACG,GAAG,GAAGX,WAAW;IAErBY,UAAU,CAAC,MAAM;MACbR,GAAG,CAACS,SAAS,CAACL,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;IACtC,CAAC,EAAE,CAAC,CAAC;EACT;AACR,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}