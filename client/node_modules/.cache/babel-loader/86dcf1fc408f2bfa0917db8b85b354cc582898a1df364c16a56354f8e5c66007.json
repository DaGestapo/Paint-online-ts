{"ast":null,"code":"import canvasState from '../store/canvasState';\nexport const connectionHandler = msg => {\n  const savedCanvas = localStorage.getItem(msg.id) ? localStorage.getItem(msg.id) : null;\n  const ctx = canvasState.ctx ? canvasState.ctx : null;\n  if (savedCanvas && ctx) {\n    const src = JSON.parse(savedCanvas).current;\n    const img = document.createElement('img');\n    img.src = src;\n    setTimeout(() => {\n      ctx.drawImage(img, 0, 0, 600, 400);\n    }, 0);\n  }\n};","map":{"version":3,"names":["canvasState","connectionHandler","msg","savedCanvas","localStorage","getItem","id","ctx","src","JSON","parse","current","img","document","createElement","setTimeout","drawImage"],"sources":["C:/Users/mistR/OneDrive/Рабочий стол/React/ts/paint-ts/client/src/sokcet/connectionHandler.ts"],"sourcesContent":["import { ConnectionI } from '../model/msgI';\r\nimport canvasState from '../store/canvasState';\r\n\r\nexport const connectionHandler = (msg: ConnectionI) => {\r\n        const savedCanvas = localStorage.getItem(msg.id)\r\n            ? localStorage.getItem(msg.id)\r\n            : null;\r\n        const ctx = canvasState.ctx\r\n            ? canvasState.ctx\r\n            : null;\r\n\r\n        if(savedCanvas && ctx) {\r\n            const src: string = JSON.parse(savedCanvas).current;\r\n            const img = document.createElement('img');\r\n            img.src = src;\r\n\r\n            setTimeout(() => {\r\n                ctx.drawImage(img, 0, 0, 600, 400);\r\n            }, 0);\r\n        }\r\n}"],"mappings":"AACA,OAAOA,WAAW,MAAM,sBAAsB;AAE9C,OAAO,MAAMC,iBAAiB,GAAIC,GAAgB,IAAK;EAC/C,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAACH,GAAG,CAACI,EAAE,CAAC,GAC1CF,YAAY,CAACC,OAAO,CAACH,GAAG,CAACI,EAAE,CAAC,GAC5B,IAAI;EACV,MAAMC,GAAG,GAAGP,WAAW,CAACO,GAAG,GACrBP,WAAW,CAACO,GAAG,GACf,IAAI;EAEV,IAAGJ,WAAW,IAAII,GAAG,EAAE;IACnB,MAAMC,GAAW,GAAGC,IAAI,CAACC,KAAK,CAACP,WAAW,CAAC,CAACQ,OAAO;IACnD,MAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IACzCF,GAAG,CAACJ,GAAG,GAAGA,GAAG;IAEbO,UAAU,CAAC,MAAM;MACbR,GAAG,CAACS,SAAS,CAACJ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;IACtC,CAAC,EAAE,CAAC,CAAC;EACT;AACR,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}